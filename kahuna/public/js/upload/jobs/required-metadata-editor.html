<form class="job-editor" name="jobEditor" ng:submit="ctrl.save()" novalidate>
    <div class="job-editor__inputs">
        <label class="job-info--editor__field">
            <div class="job-info--editor__label">Description</div>
            <textarea
                name="description"
                placeholder="e.g. {{funnyDescription}}…"
                required
                class="job-info--editor__input job-info--editor__input--description"
                msd-elastic
                ng:model="ctrl.metadata.description"
                ng:controller="DescriptionPlaceholderCtrl"
                ng:change="ctrl.save()"
                ng:model-options="{updateOn: 'default blur', debounce: { default: ctrl.saveOnTime, blur: 0 }}"
                ng:class="{ 'job-info--editor__input--with-batch': ctrl.withBatch }"
            ></textarea>

            <button
                class="job-editor__apply-to-all"
                title="Apply this description to all"
                type="button"
                ng:if="ctrl.withBatch"
                ng:click="ctrl.batchApplyMetadata('description')"
            >⇔</button>
        </label>

        <label class="job-info--editor__field">
            <!-- TODO: autocomplete on byline when API responds correctly with results -->
            <div class="job-info--editor__label">Byline</div>
            <input
                type="text"
                name="byline"
                placeholder="e.g. Tom Jenkins…"
                class="job-info--editor__input job-info--editor__input--byline"
                ng:model="ctrl.metadata.byline"
                ng:change="ctrl.save()"
                ng:model-options="{updateOn: 'default blur', debounce: { default: ctrl.saveOnTime, blur: 0 }}"
                ng:class="{ 'job-info--editor__input--with-batch': ctrl.withBatch }"
            />

            <button
                class="job-editor__apply-to-all"
                title="Apply this byline to all"
                type="button"
                ng:if="ctrl.withBatch"
                ng:click="ctrl.batchApplyMetadata('byline')"
            >⇔</button>

        </label>

        <div class="job-info--editor__field">
            <div class="job-info--editor__label">Credit</div>

            <md-autocomplete required
                md-input-name="autocomplete"
                ng-disabled="ctrl.disabled()"
                md-selected-item="ctrl.metadata.credit"
                md-search-text-change="ctrl.searchTextChange(ctrl.searchText)"
                md-search-text="ctrl.searchText"
                md-selected-item-change="ctrl.selectedItemChange(item)"
                md-items="item in ctrl.querySearch(ctrl.searchText)"
                md-item-text="item.display"
                md-min-length="1">

                <md-item-template>
                    <span
                        md-highlight-text="ctrl.searchText"
                        md-highlight-flags="^i">

                        {{item.display}}
                    </span>
                </md-item-template>

                <div ng-messages="autocompleteForm.autocomplete.$error">
                    <div ng-message="required">This field is required</div>
                </div>

            </md-autocomplete>

            <button
                class="job-editor__apply-to-all"
                title="Apply this credit to all"
                type="button"
                ng:if="ctrl.withBatch"
                ng:click="ctrl.batchApplyMetadata('credit')"
            >⇔</button>
        </div>
    </div>
    <!-- Angular doesn't submit a form without a submit element, bonza!
    see: https://docs.angularjs.org/api/ng/directive/form#submitting-a-form-and-preventing-the-default-action -->
    <input type="submit" class="ng-hide" />
</form>
